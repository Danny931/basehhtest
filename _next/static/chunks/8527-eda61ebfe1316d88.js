"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8527],{38527:function(e,t,n){n.d(t,{Z:function(){return ef}});var r=n(98788),i=n(70865),c=n(96670),s=n(5163),o=n(52322),l=n(2784),a=n(5305),u=n(88700),d=n(62392),f=n(13670),x=n(76903),h=n(48608),p=n(89495),m=n(26229),g=n(16978),v=n(11803),Z=n(65095),j=n(46737),y=n(64548),b=n(9101),w=n(65957),C=n(36695),P=n(19081),k=n(98838),A=n(93304),I=n(29089),S=n(68298),F=n(92228),E=n(45455),L=n.n(E),D=n(88587),T=n(3411),Y=n(34498),G=n.n(Y),N=n(31198),O=n(82767),_=n(69225),J=n(13023),M=n(18493),U=n(52180),W=n(54231),q=n(11095),K=n(88864),R=n(7887),$=function(e){var t=e.item,n=e.isSelected,r=e.onClick;return(0,o.jsxs)(K.Ak,{alignItems:"center",px:"16px",py:"8px",children:[(0,o.jsx)(p.Z,{style:{flex:1},children:t.label}),(0,o.jsx)(x.Z,{ml:"24px",children:(0,o.jsx)(R.Z,{name:"item-select",scale:"sm",onChange:r,checked:n,value:t.collectionAddress})})]})},z=function(e){var t=e.nftActivityFilters,n=(0,w.$G)().t,r=(0,l.useState)(!1),s=r[0],u=r[1],d=(0,l.useState)(""),h=d[0],m=d[1],g=(0,l.useState)({orderKey:"label",orderDir:"asc"}),v=g[0],Z=g[1],j=(0,A.t8)().data,y=(0,l.useRef)(null),b=(0,l.useRef)(null),C=(0,q.q)(),P=C.addActivityCollectionFilters,k=C.removeActivityCollectionFilters,I=C.removeAllActivityCollectionFilters,S=v.orderKey,F=v.orderDir,E=t.collectionFilters.length>0,L=(h&&h.length>1?Object.values(j).filter(function(e){return -1!==e.name.toLowerCase().indexOf(h.toLowerCase())}):Object.values(j)).map(function(e){var n=t.collectionFilters.some(function(t){return(0,a.UJ)(e.address)===(0,a.UJ)(t)});return(0,c.Z)((0,i.Z)({},e),{isSelected:n})}),D=function(){I()},T=function(){return u(!s)},Y=function(e){m(e.target.value)},R=function(e,t){e.target.checked?P({collection:t.address.toLowerCase()}):k({collection:t.address.toLowerCase()})},z=function(e){return function(){Z(function(t){return t.orderKey!==e?{orderKey:e,orderDir:"asc"}:{orderKey:e,orderDir:"asc"===t.orderDir?"desc":"asc"}})}};return(0,l.useEffect)(function(){var e=function(e){var t=e.target;y.current&&b.current&&!b.current.contains(t)&&!y.current.contains(t)&&u(!1)};return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}},[u,y,b]),(0,o.jsxs)(x.Z,{alignItems:"center",mr:"4px",mb:"4px",children:[(0,o.jsx)(f.Z,{ref:y,children:(0,o.jsx)(N.Z,{component:(0,o.jsx)(K.yR,{onClick:T,variant:E?"subtle":"light",scale:"sm",hasItem:E,children:n("Collection")}),isOpen:s,options:{placement:"bottom"},children:(0,o.jsxs)(f.Z,{maxWidth:"375px",ref:b,children:[(0,o.jsx)(K._8,{alignItems:"center",p:"16px",children:(0,o.jsx)(O.Z,{startIcon:(0,o.jsx)(_.Z,{color:"textSubtle"}),children:(0,o.jsx)(J.Z,{name:"query",placeholder:n("Search"),onChange:Y,value:h})})}),(0,o.jsxs)(x.Z,{alignItems:"center",p:"16px",children:[(0,o.jsxs)(K.Lb,{onClick:z("name"),style:{flex:1},children:[(0,o.jsx)(p.Z,{fontSize:"12px",color:"secondary",fontWeight:"bold",textTransform:"uppercase",children:n("Name")}),(0,o.jsxs)(f.Z,{width:"18px",children:["name"===S&&"asc"===F&&(0,o.jsx)(M.Z,{width:"18px",color:"secondary"}),"name"===S&&"desc"===F&&(0,o.jsx)(U.Z,{width:"18px",color:"secondary"})]})]}),(0,o.jsxs)(K.Lb,{onClick:z("isSelected"),children:[(0,o.jsx)(p.Z,{fontSize:"12px",color:"secondary",fontWeight:"bold",textTransform:"uppercase",children:n("Filter")}),(0,o.jsxs)(f.Z,{width:"18px",children:["isSelected"===S&&"asc"===F&&(0,o.jsx)(M.Z,{width:"18px",color:"secondary"}),"isSelected"===S&&"desc"===F&&(0,o.jsx)(U.Z,{width:"18px",color:"secondary"})]})]})]}),(0,o.jsx)(f.Z,{height:"240px",overflowY:"auto",children:L.length>0?G()(L,S,F).map(function(e){var t=function(t){return R(t,e)};return(0,o.jsx)($,{item:{label:e.name,collectionAddress:e.address},isSelected:e.isSelected,onClick:t},e.address)}):(0,o.jsx)(x.Z,{alignItems:"center",justifyContent:"center",height:"230px",children:(0,o.jsx)(p.Z,{color:"textDisabled",textAlign:"center",children:n("No results found")})})})]})})}),E&&(0,o.jsx)(K.PZ,{variant:E?"subtle":"light",scale:"sm",onClick:D,children:(0,o.jsx)(W.Z,{color:"currentColor",width:"18px"})})]})},B=n(93058);function Q(){var e=(0,F.Z)(["\n  white-space: nowrap;\n  ","\n"]);return Q=function(){return e},e}function X(){var e=(0,F.Z)(["\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n"]);return X=function(){return e},e}var H=(0,T.ZP)(h.Z).withConfig({componentId:"sc-34bde88d-0"})(Q(),function(e){return e.hasItem&&"  \n    border-top-right-radius: 0;\n    border-bottom-right-radius: 0;\n    padding-right: 8px;\n  "}),V=(0,T.ZP)(B.Z).withConfig({componentId:"sc-34bde88d-1"})(X()),ee=function(e,t){switch(t){case D.YG.CANCEL:return e("Delisted");case D.YG.MODIFY:return e("Modified");case D.YG.NEW:return e("Listed");case D.YG.SELL:return e("Sold");default:return""}},et=function(e){var t=e.eventType,n=e.collectionAddress,r=e.nftActivityFilters,i=(0,w.$G)().t,c=(0,q.q)(),s=c.addActivityTypeFilters,l=c.removeActivityTypeFilters,a=r.typeFilters.some(function(e){return e===t}),u=function(){a||s({collection:n,field:t})},d=function(){l({collection:n,field:t})};return(0,o.jsxs)(x.Z,{alignItems:"center",mr:"4px",mb:"4px",children:[(0,o.jsx)(f.Z,{children:(0,o.jsx)(H,{onClick:u,variant:a?"subtle":"light",scale:"sm",hasItem:a,children:ee(i,t)})}),a&&(0,o.jsx)(V,{variant:a?"subtle":"light",scale:"sm",onClick:d,children:(0,o.jsx)(W.Z,{color:"currentColor",width:"18px"})})]})},en=n(26297),er=function(e){var t=e.collectionAddress,n=(0,en.Z)(e,["collectionAddress"]),r=(0,w.$G)().t,s=(0,q.q)().removeAllActivityFilters,l=function(){s(t)};return(0,o.jsx)(h.Z,(0,c.Z)((0,i.Z)({variant:"text",scale:"sm",onClick:l,style:{whiteSpace:"nowrap"}},n),{children:r("Clear")}),"clear-all")};function ei(){var e=(0,F.Z)(["\n  gap: 16px;\n\n  "," {\n    align-items: center;\n    flex-grow: 2;\n  }\n"]);return ei=function(){return e},e}function ec(){var e=(0,F.Z)(["\n  align-items: center;\n  flex: 1;\n  flex-wrap: nowrap;\n  overflow-x: auto;\n  -webkit-overflow-scrolling: touch;\n\n  "," {\n    flex-wrap: wrap;\n    overflow-x: revert;\n  }\n"]);return ec=function(){return e},e}var es=(0,T.ZP)(x.Z).withConfig({componentId:"sc-fa27af2-0"})(ei(),function(e){return e.theme.mediaQueries.sm}),eo=(0,T.ZP)(x.Z).withConfig({componentId:"sc-fa27af2-1"})(ec(),function(e){return e.theme.mediaQueries.md}),el=function(e){var t=e.address,n=e.nftActivityFilters,r=(0,w.$G)().t;return(0,o.jsxs)(es,{justifyContent:"space-between",flexDirection:["column","column","row"],children:[(0,o.jsx)(p.Z,{textTransform:"uppercase",color:"textSubtle",fontSize:"12px",bold:!0,children:r("Filter by")}),(0,o.jsxs)(eo,{children:[""===t&&(0,o.jsx)(z,{nftActivityFilters:n}),[D.YG.NEW,D.YG.CANCEL,D.YG.MODIFY,D.YG.SELL].map(function(e){return(0,o.jsx)(et,{eventType:e,collectionAddress:t,nftActivityFilters:n},e)})]}),L()(n.typeFilters)&&L()(n.collectionFilters)?null:(0,o.jsx)(er,{collectionAddress:t})]})},ea=n(94345),eu=n(51661),ed=n(20535),ef=function(e){var t=e.collection,n=(0,u.TL)(),F=(t||{address:""}).address,E=(0,A.ly)(F),L=(0,P.ZP)().theme,D=(0,w.$G)().t,T=(0,l.useState)({activity:[],currentPage:1,maxPage:1}),Y=T[0],G=T[1],N=(0,l.useState)([]),O=N[0],_=N[1],J=(0,l.useState)([]),M=J[0],U=J[1],W=(0,l.useState)(!0),q=W[0],K=W[1],R=(0,l.useState)(!1),$=R[0],z=R[1],B=(0,l.useState)(1),Q=B[0],X=B[1],H=(0,k.sP)(),V=H.lastUpdated,ee=H.setLastUpdated,et=(0,C.Hf)(),en=(0,d.Z)(),er=en.isXs,ei=en.isSm,ec=en.isMd,es=JSON.stringify(E);return(0,l.useEffect)(function(){var e,t=(e=(0,r.Z)(function(){var e,t,n,r;return(0,s.__generator)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),K(!0),e=JSON.parse(es),[4,(0,j.Du)(F.toLowerCase(),e,100)];case 1:return t=i.sent(),G({activity:n=(0,eu.f)(t),currentPage:1,maxPage:Math.ceil(n.length/8)||1}),K(!1),z(!0),[3,3];case 2:return r=i.sent(),console.error("Failed to fetch collection activity",r),[3,3];case 3:return[2]}})}),function(){return e.apply(this,arguments)});(F&&(0,a.UJ)(F)||""===F)&&t()},[n,F,es,V]),(0,l.useEffect)(function(){var e,t=(e=(0,r.Z)(function(){var e;return(0,s.__generator)(this,function(e){switch(e.label){case 0:return[4,(0,ed.M)(O)];case 1:return U(e.sent()),[2]}})}),function(){return e.apply(this,arguments)});O.length>0&&t()},[O]),(0,l.useEffect)(function(){_(Y.activity.slice(8*(Y.currentPage-1),8*Y.currentPage))},[Y]),(0,o.jsxs)(f.Z,{py:"32px",children:[(0,o.jsx)(y.Z,{px:[0,null,"24px"],children:(0,o.jsxs)(x.Z,{style:{gap:"16px",padding:"0 16px"},alignItems:[null,null,"center"],flexDirection:["column","column","row"],flexWrap:ec?"wrap":"nowrap",children:[(0,o.jsx)(el,{address:(null==t?void 0:t.address)||"",nftActivityFilters:E}),(0,o.jsx)(h.Z,(0,c.Z)((0,i.Z)({scale:"sm",disabled:q,onClick:function(){ee()}},ec&&{width:"100%"}),{children:D("Refresh")}))]})}),(0,o.jsx)(y.Z,{style:{overflowX:"auto"},children:0!==Y.activity.length||0!==M.length||0!==O.length||q?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(m.Z,{children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsxs)(g.Th,{textAlign:["center",null,"left"],children:[" ",D("Item")]}),(0,o.jsxs)(g.Th,{textAlign:"right",children:[" ",D("Event")]}),er||ei?null:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(g.Th,{textAlign:"right",children:[" ",D("Price")]}),(0,o.jsxs)(g.Th,{textAlign:"center",children:[" ",D("From")]}),(0,o.jsxs)(g.Th,{textAlign:"center",children:[" ",D("To")]})]}),(0,o.jsxs)(g.Th,{textAlign:"center",children:[" ",D("Date")]}),er||ei?null:(0,o.jsx)(g.Th,{})]})}),(0,o.jsx)("tbody",{children:$?O.map(function(e){var t=M.find(function(t){var n;return t.tokenId===e.nft.tokenId&&(0,a.UJ)(t.collectionAddress)===(0,a.UJ)(null===(n=e.nft)||void 0===n?void 0:n.collection.id)});return(0,o.jsx)(ea.Z,{activity:e,nft:t,bnbBusdPrice:et},"".concat(e.marketEvent,"#").concat(e.nft.tokenId,"#").concat(e.timestamp,"#").concat(e.tx))}):(0,o.jsx)(b.Z,{})})]}),(0,o.jsx)(x.Z,{borderTop:"1px ".concat(L.colors.cardBorder," solid"),pt:"24px",flexDirection:"column",justifyContent:"space-between",height:"100%",children:(0,o.jsxs)(I.O,{children:[(0,o.jsx)(I.E,{onClick:function(){1!==Y.currentPage&&G(function(e){return(0,c.Z)((0,i.Z)({},e),{currentPage:e.currentPage-1})})},children:(0,o.jsx)(v.Z,{color:1===Y.currentPage?"textDisabled":"primary"})}),(0,o.jsx)(p.Z,{children:D("Page %page% of %maxPage%",{page:Y.currentPage,maxPage:Y.maxPage})}),(0,o.jsx)(I.E,{onClick:(0,r.Z)(function(){var e,t,n,r;return(0,s.__generator)(this,function(s){switch(s.label){case 0:if(!(Y.currentPage!==Y.maxPage)||(G(function(e){return(0,c.Z)((0,i.Z)({},e),{currentPage:e.currentPage+1})}),!(Y.maxPage-Y.currentPage==1&&Y.activity.length===100*Q)))return[3,4];s.label=1;case 1:return s.trys.push([1,3,,4]),K(!0),e=JSON.parse(es),[4,(0,j.Du)(F.toLowerCase(),e,100*(Q+1))];case 2:return t=s.sent(),n=(0,eu.f)(t),G(function(e){return(0,c.Z)((0,i.Z)({},e),{activity:n,maxPage:Math.ceil(n.length/8)||1})}),K(!1),X(function(e){return e+1}),[3,4];case 3:return r=s.sent(),console.error("Failed to fetch collection activity",r),[3,4];case 4:return[2]}})}),children:(0,o.jsx)(Z.Z,{color:Y.currentPage===Y.maxPage?"textDisabled":"primary"})})]})})]}):(0,o.jsxs)(x.Z,{p:"24px",flexDirection:"column",alignItems:"center",children:[(0,o.jsx)(S.Z,{}),(0,o.jsx)(p.Z,{pt:"8px",bold:!0,children:D("No NFT market history found")})]})})]})}},20535:function(e,t,n){n.d(t,{M:function(){return m}});var r,i=n(98788),c=n(70865),s=n(96670),o=n(87394),l=n(5163),a=n(46737),u=n(84636),d=n.n(u),f=n(96795),x=n.n(f),h=n(5305),p=n(36806),m=(r=(0,i.Z)(function(e){var t,n,r,i,u,f,m,g;return(0,l.__generator)(this,function(l){switch(l.label){case 0:return n=(t=(0,o.Z)(x()(e,function(e){return(0,h.UJ)(e.nft.collection.id)===p.J}),2))[0],r=t[1],i=d()(r.map(function(e){return{tokenId:e.nft.tokenId,collectionAddress:e.nft.collection.id}}),function(e){return"".concat(e.tokenId,"#").concat(e.collectionAddress)}),[4,Promise.all([n.length?(0,a.Rq)(p.J):Promise.resolve(null),(0,a._C)(i)])];case 1:return f=(u=o.Z.apply(void 0,[l.sent(),2]))[0],m=u[1],g=f?n.map(function(e){var t=f.data[e.nft.otherId].collection.name;return(0,s.Z)((0,c.Z)({},f.data[e.nft.otherId]),{tokenId:e.nft.tokenId,attributes:[{traitType:"bunnyId",value:e.nft.otherId}],collectionAddress:e.nft.collection.id,collectionName:t})}):[],[2,m.concat(g)]}})}),function(e){return r.apply(this,arguments)})},51661:function(e,t,n){n.d(t,{f:function(){return o}});var r=n(50930),i=n(88587),c=n(34498),s=n.n(c),o=function(e){var t,n,c=e.askOrders,o=e.transactions,l=function(e){switch(e){case i.cP.CANCEL:return i.YG.CANCEL;case i.cP.MODIFY:return i.YG.MODIFY;case i.cP.NEW:return i.YG.NEW;default:return i.YG.MODIFY}},a=(0,r.Z)((t=void 0===c?[]:c).map(function(e){var t,n=l(e.orderType),r=e.askPrice,i=e.timestamp,c=e.nft;return{marketEvent:n,price:r,timestamp:i,nft:c,tx:e.id,seller:null==e?void 0:e.seller.id}})).concat((0,r.Z)((n=void 0===o?[]:o).map(function(e){var t,n=i.YG.SELL,r=e.timestamp,c=e.nft,s=e.askPrice,o=e.id;return{marketEvent:n,price:s,timestamp:r,nft:c,tx:o,buyer:e.buyer.id,seller:e.seller.id}})));return a.length>0?s()(a,function(e){return parseInt(e.timestamp,10)},"desc"):[]}},68298:function(e,t,n){var r=n(92228),i=n(3411);function c(){var e=(0,r.Z)(["\n  background: url('/images/nfts/no-profile-md.png');\n  background-repeat: no-repeat;\n  background-size: cover;\n  border-radius: 50%;\n  position: relative;\n  width: 96px;\n  height: 96px;\n\n  & > img {\n    border-radius: 50%;\n  }\n"]);return c=function(){return e},e}var s=i.ZP.div.withConfig({componentId:"sc-9689af5c-0"})(c());t.Z=s}}]);
//# sourceMappingURL=8527-eda61ebfe1316d88.js.map